---
layout:     post
title:      Python, R, and the allure of magic
subtitle:   转载自：http://wesmckinney.com/blog/python-r-and-the-allure-of-magic/
date:       2011-09-30
author:     Wes McKinney
header-img: img/background1.jpg
catalog: true
tags:
    - python
    - difference
    - different design
    - names
    - references
---





** Fri 30 September 2011

 

R is much more magical than Python. What do I mean by this? In R, things like this are a part of everyday life:

If you're a seasoned Python programmer, you might have the sort of visceral negative reaction that I do to this. Seriously, just where in the hell did those variable names come from? So when I say **magic** here I'm talking about *abusing the language's parser*. There is nothing special about R that makes the above behavior possible, but rather taking a fundamentally different design philosophy to, say, Python. As any Python programmer knows: **Explicit is better than implicit**. I happen to agree. There is also a bit of a semantic difference in R versus Python in that assignment in R typically copies data, whereas variables in Python are simply references (labels) for a particular object. So you could make the argument that the names `a` and `b` above are more strongly linked to the underlying data.

While building [pandas](http://pandas.sourceforge.net/.) over the last several years, I occasionally grapple with issues like the above. Maybe I should just break from Python ethos and embrace magic? I mean, how hard would it be to get the above behavior in Python? Python gives you stack frames and the [ast](http://docs.python.org/library/ast.html) module after all. So I went down the rabbit hole and wrote this little code snippet:

While this is woefully unpythonic, it's also kind of cool:

This can even parse and format more complicated expressions (harder than it looks, because you have to walk the whole AST):

Now, I am *not* suggesting we do this any time soon. I'm going to prefer the explicit approach (cf. the [Zen of Python](http://www.python.org/dev/peps/pep-0020)) any day of the week:
