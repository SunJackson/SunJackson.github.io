---
layout:     post
title:      A Primer on Python Metaclasses
subtitle:   转载自：http://jakevdp.github.io/blog/2012/12/01/a-primer-on-python-metaclasses/
date:       2012-12-01
author:     Jake VanderPlas
header-img: img/background0.jpg
catalog: true
tags:
    - solution
    - natural
    - flexible
    - apis
---

I've gone through some examples of what metaclasses are, and some ideas 
about how they might be used to create very powerful and flexible APIs. 
Although metaclasses are in the background of everything you do in Python,
the average coder rarely has to think about them.

But the question remains: when should you think about using custom
metaclasses in your project? It's a complicated question, but
there's a quotation floating around the web
that addresses it quite succinctly:

> Metaclasses are deeper magic than 99% of users should ever worry about.
If you wonder whether you need them, you don’t (the people who actually
need them know with certainty that they need them, and don’t need an
explanation about why).
– Tim Peters


In a way, this is a very unsatisfying answer: it's a bit reminiscent of
the wistful and cliched explanation of the border between attraction
and love: "well, you just... know!"

But I think Tim is right: in general,
I've found that most tasks in Python that can be accomplished through
use of custom metaclasses can also be accomplished more cleanly and with
more clarity by other means. As programmers, we should always be careful
to avoid being clever for the sake of cleverness alone, though
it is admittedly an ever-present temptation.

I personally spent six years doing science with Python, writing code
nearly on a daily basis, before I found a problem for which metaclasses
were the natural solution. And it turns out Tim was right:

I just knew.
