---
layout:     post
title:      Padlock Puzzle
subtitle:   转载自：http://datagenetics.com/blog/march32012/index.html
date:       2012-03-15
author:     未知
header-img: img/background3.jpg
catalog: true
tags:
    - letters
    - word
    - solutions
    - padlocks
    - encoding
---

Like all programmers, I get pleasure from writing code and solving problems. Sometimes I code just for fun. Today was one of those days. I thought I would share my results with you.

### Padlocks with letters
|![](http://datagenetics.com/blog/march32012/biglock.jpg)|I was browsing the web and I came upon the image of an old padlock similar to the one on the left. It reminded me of a word puzzle I once read about that I had been meaning to solve, but never got around to.Some people have difficulty remembering numbers and, to them, a combination padlock using entirely numeric digits presents a challenge. These people might find more utility in a padlock whose combination is composed of letters so that a memorable word can be selected as the password. An example padlock using seven barrels is shown here.At first glance, it may appear that a combination lock using letters is much more secure than one using numbers because of the vastly increased number of combinations it affords. In theory this is true, and if the combination of the letter padlock is selected **entirely at random** then it produces a vastly expanding number of permutations.|

Some people have difficulty remembering numbers and, to them, a combination padlock using entirely numeric digits presents a challenge. These people might find more utility in a padlock whose combination is composed of letters so that a memorable word can be selected as the password. An example padlock using seven barrels is shown here.

For a seven barrel example, a numeric only combination lock has *10 x 10 x 10 x 10 x 10 x 10 x 10 = 10,000,000* combinations. One using letters has *26 x 26 x 26 x 26 x 26 x 26 x 26 = 8,031,810,176* combinations.

In reality, however, a random combination is not used, and instead the tumblers are typically set to create a memorable word.

Using a very complete online dictionary, I was able to find just **23,109** distinct seven letter words in the English language. This represents a meagre **0.000288%** of the addressable space. It's an illusion of security, and one that social-engineering hackers exploit. Sometime soon I'll write another posting on the (lack) of entropy in most passwords, but I'm getting futher and further away from today's puzzle …

### The puzzle
|Given a padlock (I believe the original problem stated it had five barrels, like the example here on the right), the puzzle was to find a pair of English words such that, when one the words was selected in the gate, the other word could be found somewhere on the barrel.For example, if the word **FIZZY** appeared in the lock gate, then a few letters around the barrel it would be possible to find the word **KNEED**.|![](http://datagenetics.com/blog/march32012/padlock.jpg)|

For example, if the word **FIZZY** appeared in the lock gate, then a few letters around the barrel it would be possible to find the word **KNEED**.
|![](http://datagenetics.com/blog/march32012/fk.jpg)|How would we go about solving this problem? Well, we *could* brute force all combinations of letters, check for a valid word and then see if this happens to generate any other words, but here I am using *"could"* in the politest way possible. Anybody who codes a solution this way should really not be coding!We need a much more elegant (and faster) solution. We can do much better …|

We need a much more elegant (and faster) solution. We can do much better …

### The process

Glancing at the padlock we see that the wheels are labeled in the same order. What this means is that, however the barrels are rotated, each adjacent barrel maintains the same relative (delta) between the pair of letters either side. What this means is that the two words (or more) in the solution to the puzzle must have the same relative spacing between their letters.

The diagram above shows this in pictures.

Staring with the letter "F" in **FIZZY**, we see that there is a delta of three letters to get to "I", then another seventeen letters to get to "Z". Since there are two letter "Z"s in a row, there is no delta, and finally to get from "Z" to the "Y" we need to step back one letter.

So now, we have an encoding for the word **FIZZY**, and it's +3, +17, 0, -1. (After the first letter, we go on 3 letters, then on 17, then repeat the same letter, and finally go back one). All words that appear on the barrel at the same time will have the same encoding. Computer guys like to call this a **HASH FUNCTION**, it's a repeatable encoding/index system.

Time for a bit of house keeping. Negative numbers can be a bother to work with, and also since there are only 26 letters in the alphabetic, if we're looking for, for instance, the letter that is +17 past the letter "T", we're going to shoot past the end!

Thankfully, both these issues can be solved by the use of **Modulo-26** counting. This is analogous to the odometers of days of old. We just *wrap around*. If a letter goes off the end, past "Z", we simply subtract 26 and start again at the letter "A". In this way, subtracting one from a letter is really just the same as adding twenty five (going around the clock as needed).

### Encoding

One more step to go, then we have everything lined up. It is possible to work with the number chain +3, +17, 0, -1 to search for candidate words but it complicates things to have to work with more than one value (meaning it's not *elegant* coding).

Those blessed with some math experienced will realize that we *could* encode this HASH value into a single numeric field using *base-26* numbers. This is a very elegant solution, and in any interview I'd give you top marks for proposing that solution.
|What I elected to do is use letters to represent my number base (can you can see it's the same thing?) In my encoding, **A=0**, **B=1**, **C=2** … **Z=25**. (It really does not matter what encoding you use as long as it is repeatable). So for the word **FIZZY**, the encoding is **DRAZ**.*All* words that appear on the tumbler at the same time as **FIZZY** have the encoding of **DRAZ**.Ok, we've just turned onto finals. We download a database of words from the web, store it in our favourite database tool (I use [Microsoft SQL Server](http://www.microsoft.com/sqlserver/en/us/default.aspx)), add a column for the encoding and pre-compute all the deltas values.|![](http://datagenetics.com/blog/march32012/sql.jpg)|

*All* words that appear on the tumbler at the same time as **FIZZY** have the encoding of **DRAZ**.

Now it's a simple query (fast) query to find the all rows with duplicate encoded values. *"Done!"*

I used a database containing approximately 170k English words. Below are the results.

### Seven Letter Soutions

I found two seven barrel solutions:

SULPHUR with PRIMERO

NOWHERE with ABJURER

### Six Letter Soutions

There are eleven six barrel solutions:

TUFFET with STEEDS

INKIER with PURPLY

MUUMUU with WEEWEE

GRUNGY with ALOHAS

BOUFFE with ANTEED

HUSHED with BOMBYX

MANFUL with THUMBS

PEPPER with LALLAN

FUSION with LAYOUT

KERNEL with GANJAH

DAWTED with SPLITS

### Five Letter Soutions

There are 93 five barrel solutions:
|HINTS and STYEDDELED and STATSSTEER and TUFFSTUMMY and NOGGSNONET and UVULAMOTTE and GINNYMOCHA and SUINGSURGY and MOLASADDER and BEEFSFILLS and LORRYLOTTE and FINNYBENNI and RUDDYKNEED and FIZZYGLARY and PUJAHPULPY and VARVEPUNTY and JOHNSINGOT and CHAINDIDOS and PUPAECHEER and JOLLYHOTEL and OVALSGNARR and AHULLGNARL and XERICNULLS and TARRYTASSE and HOGGS|HOLLY and BIFFSTAZZE and NUTTYMUFFS and SALLYSARIN and MULCHMULES and SARKYSASSY and MUMMSMUNCH and SATINGOLLY and MURREGOLEM and MURKSLUFFS and RALLYRALPH and OXIMERAPHE and CLASPRATAN and VEXERVEALY and OXTERLUTEA and PYXIETELOI and WHORLTENET and ALULAGREEN and TERRADOLLS and WHEELEPOCH and ALKYDCORKY and WILESWIVER and FRENAFRERE and SERER|COGON and SEWEDSECCO and COMMYBOURG and VIOLABOLLS and HURRYMARRY and GULLSGULPS and MARVYOCTAD and DRIPSGULFS and MARLYMASSE and GUMMYGUNNY and MATTEAPTLY and TIMERCRAAL and PENNYPERRY and CREELCREDO and SHUTELATTE and FUNNYLATER and SHALYLATEX and SHALETIFFS and SHEERTIGER and PECANRIVER and ARENACUBED and MELONCURLY and WOLFSWOMBS and CUSHY|BUFFI and HALLOHARRY and BULLSBUNNY and SLEEPBUTYL and HAZERGANJA and KERNEGASSY and SMEEKFADGE and TORUSTOUCH and FAGOTJERKY and SNATHSNEER and TOFFSSORRY and MILLSLINUM and ROTASHERMS and DANIOEBONY and UREDODATED and SPITSSPOTS and DAZEDECHES and KINKYJIMMY and POSSEJINNS and POTTYPOTTO and JINNIBAIZA and TSARSBANJO and FERNSSETAL and AMBIT|

DELED and STATS

TUMMY and NOGGS

MOTTE and GINNY

SURGY and MOLAS

FILLS and LORRY

BENNI and RUDDY

GLARY and PUJAH

PUNTY and JOHNS

DIDOS and PUPAE

HOTEL and OVALS

GNARL and XERIC

TASSE and HOGGS

TAZZE and NUTTY

SARIN and MULCH

SASSY and MUMMS

GOLLY and MURRE

LUFFS and RALLY

RAPHE and CLASP

VEALY and OXTER

TELOI and WHORL

GREEN and TERRA

EPOCH and ALKYD

WIVER and FRENA

COGON and SEWED

BOURG and VIOLA

MARRY and GULLS

OCTAD and DRIPS

MASSE and GUMMY

APTLY and TIMER

PERRY and CREEL

LATTE and FUNNY

LATEX and SHALE

TIGER and PECAN

CUBED and MELON

WOMBS and CUSHY

HARRY and BULLS

BUTYL and HAZER

GASSY and SMEEK

TOUCH and FAGOT

SNEER and TOFFS

LINUM and ROTAS

EBONY and UREDO

SPOTS and DAZED

JIMMY and POSSE

POTTO and JINNI

BANJO and FERNS

### Four Letter Soutions

There are 331 four barrel solutions, including 15 where there are triple words on the barrel.
|DEED and ABBA and NOONBEEF and LOOP and PSSTPYIC and RAKE and FOYSPAPA and JUJU and DODONAAN and ANNA and BOOBASCI and SKUA and MEOUEAUX and OKEH and SOILDADO and AXAL and HEHS|PREX and YANG and WYLEGLIB and JOLE and ZEBUYETI and FLAP and SYNCLANE and SHUL and PERIPERK and SHUN and LANGFUJI and APED and PETSBYRE and KHAN and SPIV|

BEEF and LOOP and PSST

PAPA and JUJU and DODO

ASCI and SKUA and MEOU

DADO and AXAL and HEHS

GLIB and JOLE and ZEBU

LANE and SHUL and PERI

FUJI and APED and PETS
|DEER and EFFSSTUN and DEFYABET and HILAHINT and STYETUBE and HIPSTUBS and STARSTAT and DELESTEP and OPALOPEN and STIRTUNG and GHATHIDE and STOPTUSK and NOMEGIMP and CEILMOTT and YAFFACHE and GINKGIRD and PRAMPRAU and GIRLCEPE and MOZOYANK and CEROMODI and WYNSSULK and ACTSEGAD and MOILSUPE and GIDSMOLT and PROWPROA and SURDSURE and MOLYSURF and GIFTMOLA and PRODPROG and MOLDGIGA and YAYSCEDE and MONOMONS and CEDIORRA and BEENBEER and ILLYBEET and ADDSFILS and LORYKNUR and RUBYRUCK and LOWERUDE and FIRSTWIN and LOAFORDO and TWITRUGS and LOAMKNAP and BERGKNAR and LOBSLOCH and RUINKNEE and FIZZFIBS and RUNERUNG and ILEXFIDO and KNITFIGS and RUSELONE and BEDUKORS and WADEWAGE and QUAYQUEY and WAKEWAME and KOASKOBS and WANEWAST and SWOPDIVA and VANSJOBS and VANEVANG and ZERKTYNE and PUJAPUKE and JOEYPULL and TYPPVARY and PULS|TYPY and VARATYPE and PULAVASE and JOGSJOHN and PUNTPUNA and TYREDIBS and CHARCHAT and PUNGPUNK and TYROVATS and GLEDDIDO and PUPADIES and JOKYCHEF and PURSJOLT and INKSGLIA and CHEWIONS and DJINAHOY and TAHRTAKE and HOYSBITT and TALLTALK and BITSHOBS and GNARGNAT and TANGTAPE and HODSHOGG and TASSNUMB and ELDSBIAS and TASKAHEM and HOLTHOMY and BIGSGOOD and WEETWEED and GOONGORY and AILSSAIN and MUCHOWES and GOWKGOYS and SAKESALL and MUFFSALP and WEPTSAMP and GOADGOAS and SAMEGOBO and WEREGOBS and SANESANK and GOBYSARK and MULEMUMM and SASSMUMU and GOGOEMIT and WEALWEAR and SAWNLUVS and ENOLCLOY and FORBCLOD and RADSRAGA and LUAULUBE and ZIPSRAIL and ENVYFOXY and LUDEUDOS and OXIMFOZY and ZITSFOAM and LUGSRAPS and CLADCLAP and RAPERASE and FOGSFOHN and LUNTLUNY and RATELUNA and PYREFOLK and IRONFONS and RAZELUTZ and FONT|QATS and BLEDALLS and TEELDOPY and WHIRWHIT and DOPAGRUB and DORYTEMP and PAILPAID and ALTODOXY and GRABITCH and TENSDOFF and PARRPASE and DOGSALES and PATHPAWN and TEARDOLL and WHEEDOLS and JURYGROW and DOLTJURA and WHENWHEW and GROGCOON and SEEDCORD and FRUGCORE and WILYWILE and CORKCOTE and WINYUGLY and OAFSSEMI and COWSFRAG and SENTCOZY and WITSCOBB and FREESERA and WIVEMYNA and AMBOCOIN and WICHAMIA and SEASCOLT and FROWFROG and COLDERRS and REEFBOON and REEDNABE and BOPSBOUT and ANTSHUFF and REPPNAME and BOASNANS and VIVANAOI and HUICBODS and NAPEBOFF and HULLHUNH and ANGAANIL and NAVYREAR and ERNEBOMB and HUSHVIGA and NAYSREDO and BONYDRAB and GUDEGUFF and MALLMAMA and ESESGULS and DRIPDRIB and MARKMARL and GULFESPY and THENMAZY and GUTSPEED and ZOONODES and ETUIFUZE and TINSSHOW and PELTSHOG and ETASTIPI and PELE|PENS and ETCHCRAG and PENTCRAP and FUDSPEPS and ODORPEPO and TITSFUGU and LAMACRIB and LARKLASE and FUMYPEAN and TIERPEAR and LAWNFURS and CROPCROC and SHESPEDS and APODBRUT and SILKSIMS and AQUAKAES and SIMASIRE and BRANKANE and YOBSBRIN and SIZEBRIE and KARNIZAR and JABSHYMN and NESTHYPS and ARILDULY and NEVIRIBS and DUNEDUPE and RIDSRIFF and DURRDURE and RIFSMEET and WOODUMPS and GYBEPHEW and WOLDWOLF and CURLCUSS and OGEESLOP and HADEPILY and SLOBPILE and IBEXHAES and PIMAPINT and OHMSPINY and VOTEPIPE and ATAPHAJI and SLUTHALL and BUFFATES and PITHPIXY and SLABSLAG and UNCIUNCO and SLAMLEVO and HARKEXON and BULKATMA and HATHHATS and SLEDPIER and LEANHAWK and PIESSLIP and BURYBUTS and HAZYEYAS and SMOGGAEN and KEIRKEPI and GALEJEED and TOONSNOW and IDEMTOPH and SNOGTORR and NILLTORS and FADETORY and NILSTORC and FADO|JEHU and TORETOUT and DYEDTOYO and NISITOYS and FAKEFANG and JERKFAUX and TOILNIDI and FAVAFAZE and TONSMILT and PLOWPLOY and SORBPLED and EATSROOD and OLLAROOF and EBBSCZAR and DABSHEIL and LIMPLIMY and ROSELINN and DAFFLINY and ROTESPUN and LINGLINK and SPURROUT and LIONLIPS and HELOHELP and DAHLDALE and SPATSPAZ and LITSROAD and DAMPHERN and UREAHERO and DANKURGE and SPECSPED and HETSDASH and OLDSLIAR and HEWNKHAF and SPINSPIT and DATESPIC and BYRLBYTE and LIDOLIES and DAWKDAWN and HEARDAZE and SPOTECHE and KINKKITS and CALKCANS and KIVACANT and TREKCAPS and ECRUCAPO and GETSCARP and TRIGBAAL and EDDOFEET and POODPOON and FEEDBABE and POPSBAFF and JINNJISM and BAKEBALK and ONYXAZON and FETSBARB and SRISONES and BARFBASK and POGYBATT and JIBBJIFF and POLL|

STUN and DEFY

HINT and STYE

TUBS and STAR

STEP and OPAL

TUNG and GHAT

TUSK and NOME

MOTT and YAFF

GIRD and PRAM

CEPE and MOZO

MODI and WYNS

EGAD and MOIL

MOLT and PROW

SURE and MOLY

MOLA and PROD

GIGA and YAYS

MONS and CEDI

BEER and ILLY

FILS and LORY

RUCK and LOWE

TWIN and LOAF

RUGS and LOAM

KNAR and LOBS

KNEE and FIZZ

RUNG and ILEX

FIGS and RUSE

KORS and WADE

QUEY and WAKE

KOBS and WANE

DIVA and VANS

VANG and ZERK

PUKE and JOEY

VARY and PULS

TYPE and PULA

JOHN and PUNT

DIBS and CHAR

PUNK and TYRO

DIDO and PUPA

CHEF and PURS

GLIA and CHEW

AHOY and TAHR

BITT and TALL

HOBS and GNAR

TAPE and HODS

NUMB and ELDS

AHEM and HOLT

GOOD and WEET

GORY and AILS

OWES and GOWK

SALL and MUFF

SAMP and GOAD

GOBO and WERE

SANK and GOBY

MUMM and SASS

EMIT and WEAL

LUVS and ENOL

CLOD and RADS

LUBE and ZIPS

FOXY and LUDE

FOZY and ZITS

RAPS and CLAD

RASE and FOGS

LUNY and RATE

FOLK and IRON

LUTZ and FONT

ALLS and TEEL

WHIT and DOPA

TEMP and PAIL

DOXY and GRAB

DOFF and PARR

ALES and PATH

DOLL and WHEE

GROW and DOLT

WHEW and GROG

CORD and FRUG

WILE and CORK

UGLY and OAFS

FRAG and SENT

COBB and FREE

MYNA and AMBO

AMIA and SEAS

FROG and COLD

BOON and REED

BOUT and ANTS

NAME and BOAS

NAOI and HUIC

BOFF and HULL

ANIL and NAVY

BOMB and HUSH

REDO and BONY

GUFF and MALL

GULS and DRIP

MARL and GULF

MAZY and GUTS

ODES and ETUI

SHOW and PELT

TIPI and PELE

CRAG and PENT

PEPS and ODOR

FUGU and LAMA

LASE and FUMY

PEAR and LAWN

CROC and SHES

BRUT and SILK

KAES and SIMA

KANE and YOBS

BRIE and KARN

HYMN and NEST

DULY and NEVI

DUPE and RIDS

DURE and RIFS

UMPS and GYBE

WOLF and CURL

SLOP and HADE

PILE and IBEX

PINT and OHMS

PIPE and ATAP

HALL and BUFF

PIXY and SLAB

UNCO and SLAM

EXON and BULK

HATS and SLED

HAWK and PIES

BUTS and HAZY

GAEN and KEIR

JEED and TOON

TOPH and SNOG

TORS and FADE

TORC and FADO

TOUT and DYED

TOYS and FAKE

FAUX and TOIL

FAZE and TONS

PLOY and SORB

ROOD and OLLA

CZAR and DABS

LIMY and ROSE

LINY and ROTE

LINK and SPUR

LIPS and HELO

DALE and SPAT

ROAD and DAMP

HERO and DANK

SPED and HETS

LIAR and HEWN

SPIT and DATE

BYTE and LIDO

DAWN and HEAR

ECHE and KINK

CANS and KIVA

CAPS and ECRU

CARP and TRIG

FEET and POOD

BABE and POPS

JISM and BAKE

AZON and FETS

ONES and BARF

BATT and JIBB

 

You can find a complete list of all the articles [here](/blog.html).![](http://datagenetics.com/images/n.gif)
      Click [here](http://datagenetics.com/newsletter/subscribe.html) to receive email alerts on new articles.
