---
layout:     post
title:      Performance quirk： making a 1D object ndarray of tuples
subtitle:   转载自：http://wesmckinney.com/blog/performance-quirk-making-a-1d-object-ndarray-of-tuples/
date:       2011-10-21
author:     Wes McKinney
header-img: img/background2.jpg
catalog: true
tags:
    - october
    - fri
    - wes
    - performance issue
    - faster
---





** Fri 21 October 2011

 

> 
Wes on 2015-10-02: The performance issue I found in NumPy has been fixed, but the pandas workaround is still faster by 2x or more.


Getting a 1-dimensional `ndarray` of object dtype containing Python tuples is, unless I'm missing something, rather difficult. Take this simple example:

OK, that didn't work so well. The only way I've figured out how to get what I want is:

Yahtzee. But the kids aren't alright:

Maybe it's just me but that strikes me as being outrageously slow. Someday I'll look at what's going on under the hood, but a quickie [Cython](http://cython.org/.) function comes to the rescue:

You would hope this is faster, and indeed it's about **85x** faster:

Scratching my head here, but I'll take it. I suspect there might be some object copying going on under the hood, anyone know?
