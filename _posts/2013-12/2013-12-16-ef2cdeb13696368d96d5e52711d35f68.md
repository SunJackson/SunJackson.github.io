---
layout:     post
title:      How-to： Do Statistical Analysis with Impala and R
subtitle:   转载自：http://blog.cloudera.com/blog/2013/12/how-to-do-statistical-analysis-with-impala-and-r/
date:       2013-12-16
author:     Justin Kestelyn
header-img: img/background0.jpg
catalog: true
tags:
    - rimpala_
    - rimpala package
    - installed installing
    - installation
    - cloudera
---

**The new RImpala package brings the speed and interactivity of Impala to queries from R.**

*Our thanks to Austin Chungath, Sachin Sudarshana, and Vikas Raguttahalli of [Mu Sigma](http://www.mu-sigma.com/), a Decision Sciences and Big Data analytics company, for the guest post below.*

As is well known, Apache Hadoop traditionally relies on the MapReduce paradigm for parallel processing, which is an excellent programming model for batch-oriented workloads. But when ad hoc, interactive querying is required, the batch model fails to meet performance expectations due to its inherent latency.

To overcome this drawback, Cloudera introduced [Cloudera Impala](http://impala.io/.), the open source distributed SQL query engine for Hadoop data. Impala brings the necessary speed to queries that were otherwise not interactive when executed by the batch Apache Hive engine; Hive queries that used to take minutes can be executed in a matter of seconds using Impala.

Impala is quite exciting for us at Mu Sigma because existing Hive queries can run interactively with few or no changes. Furthermore, because we do a lot of our statistical computing on [R](http://www.r-project.org/), the popular open source statistical computing language, we considered it worthwhile to bring the speed of Impala to R.

To meet that goal, we have created a new R package, [RImpala](http://cran.r-project.org/web/packages/RImpala/index.html), which connects Impala to R. RImpala enables querying the data residing in HDFS and Apache HBase from R, which can be further processed as an R object using R functions. RImpala is now available for download from the Comprehensive R Archive Network (CRAN) under GNU General Public License (GPL3).

The RImpala architecture is simple: we used the existing Impala JDBC drivers and wrote a Java program to connect and query Impala, which we then called from R using the rJava package. We put them all together in an R package that you can use to easily query Impala from R.

![](http://blog.cloudera.com/wp-content/uploads/2013/12/rimpala.png)


Assuming that you have R and Impala already installed, installing the RImpala package is straightforward and is done in a manner similar to any other R package. There are two steps to installing RImpala and getting it working:

**Step 1: Install the package from CRAN**

You can install RImpala directly using the install.packages() command in R.







||> install.packages("RImpala")|


 

Alternatively, if you need to do offline installation of the package, you can download it from [here](http://cran.r-project.org/web/packages/RImpala/index.html) and install using the `R CMD INSTALL ` command:







||R CMD install RImpala_0.1.1.tar.gz|


 

**Step 2: Install the Impala JDBC drivers**

You need to install Cloudera’s JDBC drivers before you can use the RImpala package that we installed earlier. Cloudera provides JBDC jars on its website that you can download directly. As of this writing, [this](https://downloads.cloudera.com/impala-jdbc/impala-jdbc-0.5-2.zip) is the link to zip file containing the JDBC jars.

There are two ways to do this:

1. If you have Impala installed on the machine running R, then you will have the necessary JDBC jars already (probably in /usr/lib/impala/lib) and you can use them to initiate the connection to Impala.

1. If the machine running R is a different server than the Impala server, then you need to download the JDBC jars from the above link and extract it to a location that can be accessed by the R user.


After you have installed the JDBC drivers you can start using the RImpala package:

Load the library.







