---
layout:     post
title:      Quickly Create Dummy Variables in a Data Frame
subtitle:   转载自：http://randyzwitch.com/creating-dummy-variables-data-frame-r/
date:       2014-01-02
author:     未知
header-img: img/background2.jpg
catalog: true
tags:
    - columns
    - generate example
    - levels
    - variables
    - dummy
---

On Quora, a question was asked about how to fix the error of the [randomForest package in R not being able to handle more than 32 levels in a categorical variable](https://www.quora.com/Random-Forests/How-can-I-fix-the-error-in-the-package-randomForest). Seeing as how Iâ€™ve seen this question asked on Kaggle forums, StackOverflow and elsewhere, hereâ€™s the answer: code your own *dummy variables* instead of relying on Factors!

```
|1
2
3
4
5
6
7
8
9
10
|#Generate example dataframe with character column
example <- as.data.frame(c("A", "A", "B", "F", "C", "G", "C", "D", "E", "F"))
names(example) <- "strcol"

#For every unique value in the string column, create a new 1/0 column
#This is what Factors do "under-the-hood" automatically when passed to function requiring numeric data
for(level in unique(example$strcol)){
 example[paste("dummy", level, sep = "_")] <- ifelse(example$strcol == level, 1, 0)
}
view raw

```

As the code above shows, itâ€™s trivial to generate your own 1/0 columns of data instead of relying on Factors. There are two things to keep in mind when creating your own dummy variables:

1. The problem you are trying to solve

1. How much RAM you have available


While it may make sense to generate dummy variables for Customer State (~50 for the United States), if you were to use the code above on City Name, youâ€™d likely either run out of RAM or find out that there are too many levels to be useful. Of course, with any qualitative statement such as â€œtoo many levels to be usefulâ€�, oftentimes the only way to definitively know is to try it! Just make sure you save your work before running this code, just in case you run out of RAM. Or, use someone elseâ€™s computer for testing ğŸ˜‰

Edit 1/2/14: John Myles White brought up a good point via Twitter about RAM usage:
