---
layout:     post
title:      Benchmarking Nearest Neighbor Searches in Python
subtitle:   转载自：http://jakevdp.github.io/blog/2013/04/29/benchmarking-nearest-neighbor-searches-in-python/
date:       2013-04-29
author:     Jake VanderPlas
header-img: img/background1.jpg
catalog: true
tags:
    - trees
    - functionalities
    - allocated
    - query
    - queries
---

In a lot of ways, the plots here are their own conclusion. But in general, this
exercise convinces me that the new Ball Tree and KD Tree in scikit-learn are at the very
least equal to the scipy implementation, and in some cases much better:

- All three trees scale in the expected way with the number and dimension of the data

All three trees beat brute force by orders of magnitude in all but the most extreme
circumstances.
The `cKDTree` seems to be less optimal for highly-structured data, which is the kind
of data that is generally of interest.
The `cKDTree` has the further disadvantage of using dynamically allocated nodes,
which cannot be serialized. The pre-allocation of memory
for the new ball tree and kd tree solves this problem.

On top of this, the new ball tree and kd tree have several other advantages, including
more flexibility in traversal methods, more available metrics, and more
availale query types (e.g. KDE and 2-point correlation).

One thing that still puzzles me is the fact that the dual tree approaches don't offer
much of an improvement over single tree. The literature on the subject would
make me expect otherwise ([FastLab](http://www.fast-lab.org/nbodyproblems.html),
for example, quotes near-linear-time queries for dual tree approaches),
so perhaps there's some efficiency I've missed.

In a later post, I plan to go into more detail and explore and benchmark
some of the new functionalities added: the kernel density estimation
and 2-point correlation function methods. Until then,
I hope you've found this post interesting, and I hope you find this new
code useful!

This post was written entirely in the IPython notebook. You can
[download](http://jakevdp.github.com/downloads/notebooks/TreeBench.ipynb)
this notebook, or see a static view
[here](http://nbviewer.ipython.org/url/jakevdp.github.com/downloads/notebooks/TreeBench.ipynb).
