---
layout:     post
catalog: true
title:      Summing the Fibonacci Sequence
subtitle:      转载自：https://www.data-blogger.com/2016/07/24/summing-the-fibonacci-sequence/
date:      2016-07-24
author:      Kevin Jacobs
tags:
    - sequence
    - fibonacci
    - following problem
    - integer
    - terms
---
![](https://www.data-blogger.com/wp-content/uploads/2016/07/a302_f5-300x194.jpg)


An image from nature (by Sustainable San Mateo). The golden ratio approximately (this is a topic for discussion) appears in here and is closely related to the Fibonacci sequence.

Consider the following problem (Project Euler, Problem #2):

> Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with 1 and 2, the first 10 terms will be:1, 2, 3, 5, 8, 13, 21, 34, 55, 89, …By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.

Solving this problem by using a programming language is relatively easy and requires only looping through the sequence. How can you tackle this problem without the need for a computer? Spoiler alert: there is only one final step in which we will use a calculator.



## Defining the problem, mathematically

Let’s define the Fibonacci sequence mathematically. Let ![](https://s0.wp.com/latex.php?latex=f%28n%29&bg=ffffff&fg=000&s=0)
 be the ![](https://s0.wp.com/latex.php?latex=n%5E%7Bth%7D&bg=ffffff&fg=000&s=0)
 element in the Fibonacci sequence (where ![](https://s0.wp.com/latex.php?latex=n&bg=ffffff&fg=000&s=0)
 is an integer, starting from ![](https://s0.wp.com/latex.php?latex=0&bg=ffffff&fg=000&s=0)
). Define ![](https://s0.wp.com/latex.php?latex=f%280%29%3D0&bg=ffffff&fg=000&s=0)
, ![](https://s0.wp.com/latex.php?latex=f%281%29%3D1&bg=ffffff&fg=000&s=0)
 and now the Fibonacci sequence follows by the given rule: ![](https://s0.wp.com/latex.php?latex=f%28n%2B2%29%3Df%28n%2B1%29%2Bf%28n%29&bg=ffffff&fg=000&s=0)
. For example, ![](https://s0.wp.com/latex.php?latex=f%282%29%3Df%281%29%2Bf%280%29%3D1%2B0%3D1&bg=ffffff&fg=000&s=0)
, ![](https://s0.wp.com/latex.php?latex=f%283%29%3Df%282%29%2Bf%281%29%3D1%2B1%3D2&bg=ffffff&fg=000&s=0)
, ![](https://s0.wp.com/latex.php?latex=f%284%29%3Df%283%29%2Bf%282%29%3D2%2B1%3D3&bg=ffffff&fg=000&s=0)
 and a last example: ![](https://s0.wp.com/latex.php?latex=f%285%29%3Df%284%29%2Bf%283%29%3D3%2B2%3D5&bg=ffffff&fg=000&s=0)
, so we indeed get the sequence ![](https://s0.wp.com/latex.php?latex=0%2C+1%2C+1%2C+2%2C+3%2C+5%2C+...&bg=ffffff&fg=000&s=0)
. Note the starting ![](https://s0.wp.com/latex.php?latex=0&bg=ffffff&fg=000&s=0)
. This is different than the sequence above, but it will not do any harm!

## Sequence: spotting odd/even numbers

We are looking for even numbers in the given sequence. How can we find these? Notice that there are four possible scenario’s for two consequent numbers. Let’s denote ![](https://s0.wp.com/latex.php?latex=E&bg=ffffff&fg=000&s=0)
 as the event that a number is an even number and let’s denote ![](https://s0.wp.com/latex.php?latex=O&bg=ffffff&fg=000&s=0)
 as the event that a number is an odd number. Now ![](https://s0.wp.com/latex.php?latex=OO&bg=ffffff&fg=000&s=0)
 means that the first number is odd and also the second number is odd. The four possible scenario’s are: ![](https://s0.wp.com/latex.php?latex=OO%2C+EO%2C+OE&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=EE&bg=ffffff&fg=000&s=0)
. The Fibonacci sequence adds up the two previous numbers. So suppose we have an odd number and another odd number. An odd number ![](https://s0.wp.com/latex.php?latex=m&bg=ffffff&fg=000&s=0)
 can be represented as follows: ![](https://s0.wp.com/latex.php?latex=m+%3D+2n+%2B+1&bg=ffffff&fg=000&s=0)
 for an integer ![](https://s0.wp.com/latex.php?latex=n&bg=ffffff&fg=000&s=0)
. Adding two odd numbers, ![](https://s0.wp.com/latex.php?latex=m_1&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=m_2&bg=ffffff&fg=000&s=0)
 gives an even number: ![](https://s0.wp.com/latex.php?latex=m_1+%3D+2n_1+%2B+1&bg=ffffff&fg=000&s=0)
, ![](https://s0.wp.com/latex.php?latex=m_2+%3D+2n_2+%2B+1&bg=ffffff&fg=000&s=0)
, so ![](https://s0.wp.com/latex.php?latex=m_1+%2B+m_2+%3D+2%28n_1+%2B+n_2%29+%2B+2+%3D+2%28n_1+%2B+n_2+%2B+1%29&bg=ffffff&fg=000&s=0)
. So next event after an ![](https://s0.wp.com/latex.php?latex=OO&bg=ffffff&fg=000&s=0)
 sequence is an ![](https://s0.wp.com/latex.php?latex=E&bg=ffffff&fg=000&s=0)
. We can do similar calculations for the other events:

![](https://s0.wp.com/latex.php?latex=OO+%5CRightarrow+E&bg=ffffff&fg=000&s=0)


![](https://s0.wp.com/latex.php?latex=OE+%5CRightarrow+O&bg=ffffff&fg=000&s=0)


![](https://s0.wp.com/latex.php?latex=EO+%5CRightarrow+O&bg=ffffff&fg=000&s=0)


![](https://s0.wp.com/latex.php?latex=EE+%5CRightarrow+E&bg=ffffff&fg=000&s=0)


We start with ![](https://s0.wp.com/latex.php?latex=EO&bg=ffffff&fg=000&s=0)
 (![](https://s0.wp.com/latex.php?latex=f%280%29%3D0%2C+f%281%29%3D1&bg=ffffff&fg=000&s=0)
). So according to the rules above, the next one is ![](https://s0.wp.com/latex.php?latex=O&bg=ffffff&fg=000&s=0)
 (![](https://s0.wp.com/latex.php?latex=f%282%29%3D1&bg=ffffff&fg=000&s=0)
) and the one thereafter should be even (![](https://s0.wp.com/latex.php?latex=OO+%5CRightarrow+E&bg=ffffff&fg=000&s=0)
, and indeed, ![](https://s0.wp.com/latex.php?latex=f%283%29%3D2&bg=ffffff&fg=000&s=0)
 is even). So ![](https://s0.wp.com/latex.php?latex=EO+%5CRightarrow+OE&bg=ffffff&fg=000&s=0)
. Where will ![](https://s0.wp.com/latex.php?latex=OE&bg=ffffff&fg=000&s=0)
 result into? ![](https://s0.wp.com/latex.php?latex=OE+%5CRightarrow+O&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=EO+%5CRightarrow+O&bg=ffffff&fg=000&s=0)
, so ![](https://s0.wp.com/latex.php?latex=OE+%5CRightarrow+OO&bg=ffffff&fg=000&s=0)
. The total chain so far is ![](https://s0.wp.com/latex.php?latex=EO+%5CRightarrow+OE+%5CRightarrow+OO&bg=ffffff&fg=000&s=0)
. The next then is ![](https://s0.wp.com/latex.php?latex=E&bg=ffffff&fg=000&s=0)
 (![](https://s0.wp.com/latex.php?latex=OO+%5CRightarrow+E&bg=ffffff&fg=000&s=0)
) and the one thereafter is ![](https://s0.wp.com/latex.php?latex=O&bg=ffffff&fg=000&s=0)
, so the next in line is ![](https://s0.wp.com/latex.php?latex=EO&bg=ffffff&fg=000&s=0)
 which is also equal to the start of our chain! So the complete chain is the following:

![](https://s0.wp.com/latex.php?latex=EO+%5CRightarrow+OE+%5CRightarrow+OO+%5CRightarrow+EO&bg=ffffff&fg=000&s=0)


So, to summarize, after every 6 numbers, the chain is repeated. For every chain (if we start counting on ![](https://s0.wp.com/latex.php?latex=0&bg=ffffff&fg=000&s=0)
), then the ![](https://s0.wp.com/latex.php?latex=0%5E%7Bth%7D&bg=ffffff&fg=000&s=0)
 and the ![](https://s0.wp.com/latex.php?latex=3%5E%7Bth%7D&bg=ffffff&fg=000&s=0)
 number are even (and after that the ![](https://s0.wp.com/latex.php?latex=6%5E%7Bth%7D&bg=ffffff&fg=000&s=0)
 and the ![](https://s0.wp.com/latex.php?latex=9%5E%7Bth%7D&bg=ffffff&fg=000&s=0)
 number, and so on). That can be simplified further! All ![](https://s0.wp.com/latex.php?latex=n%5E%7Bth%7D&bg=ffffff&fg=000&s=0)
 numbers where ![](https://s0.wp.com/latex.php?latex=n&bg=ffffff&fg=000&s=0)
 is an integer and divisible by ![](https://s0.wp.com/latex.php?latex=3&bg=ffffff&fg=000&s=0)
 are even! Let’s verify that! ![](https://s0.wp.com/latex.php?latex=f%280%29%3D0&bg=ffffff&fg=000&s=0)
 which is even, ![](https://s0.wp.com/latex.php?latex=f%283%29%3D2&bg=ffffff&fg=000&s=0)
 (even), ![](https://s0.wp.com/latex.php?latex=f%286%29%3D8&bg=ffffff&fg=000&s=0)
 (even), ![](https://s0.wp.com/latex.php?latex=f%289%29%3D34&bg=ffffff&fg=000&s=0)
 (even) and so on. The beauty here is that it holds for all numbers in the sequence: ![](https://s0.wp.com/latex.php?latex=f%283n%29&bg=ffffff&fg=000&s=0)
 is even for every integer ![](https://s0.wp.com/latex.php?latex=n&bg=ffffff&fg=000&s=0)
 greater or equal than ![](https://s0.wp.com/latex.php?latex=0&bg=ffffff&fg=000&s=0)
.

Our mission was to sum up all even numbers from the Fibonacci sequence, so this now boils down to ![](https://s0.wp.com/latex.php?latex=f%280%29%2Bf%283%29%2Bf%286%29%2B...+%3D+%5Csum%5Climits_%7Bn%3D0%7D%5E%7Bn_%7Bmax%7D%7D+f%283n%29&bg=ffffff&fg=000&s=0)


 

## Recurrecurrecurrecurre… (recurrence)

I can elaborate many lines on this, but I try to keep it short. Next step is to convert this problem into another problem for which we know the solution.

We try to find an ![](https://s0.wp.com/latex.php?latex=x&bg=ffffff&fg=000&s=0)
 that satisfies the following requirement:

![](https://s0.wp.com/latex.php?latex=x%5En%3Df%28n%29&bg=ffffff&fg=000&s=0)


Does this ![](https://s0.wp.com/latex.php?latex=x&bg=ffffff&fg=000&s=0)
 exists and if so, how does it look like? Let’s try to plug it in into the formula for the Fibonacci sequence:

![](https://s0.wp.com/latex.php?latex=f%28n%2B2%29%3Df%28n%2B1%29%2Bf%28n%29+%5CRightarrow+x%5E%7Bn%2B2%7D+%3D+x%5E%7Bn%2B1%7D+%2B+x%5En&bg=ffffff&fg=000&s=0)


This can be rewritten as follows:

![](https://s0.wp.com/latex.php?latex=x%5En%28x%5E2+%2B+x+%2B+1%29%3D0&bg=ffffff&fg=000&s=0)


Interesting! Note the polynomial factor. Let’s define ![](https://s0.wp.com/latex.php?latex=r%28x%29%3Dx%5E2%2Bx%2B1&bg=ffffff&fg=000&s=0)
 to simplify the above expression to ![](https://s0.wp.com/latex.php?latex=x%5En+r%28x%29+%3D+0&bg=ffffff&fg=000&s=0)
. After doing some basic math, we can find the solution for ![](https://s0.wp.com/latex.php?latex=x%5E2%2Bx%2B1&bg=ffffff&fg=000&s=0)
, namely ![](https://s0.wp.com/latex.php?latex=x_1+%3D+%5Cfrac%7B1%7D%7B2%7D+%2B+%5Cfrac%7B1%7D%7B2%7D+%5Csqrt%7B5%7D&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=x_2+%3D+%5Cfrac%7B1%7D%7B2%7D+-+%5Cfrac%7B1%7D%7B2%7D+%5Csqrt%7B5%7D&bg=ffffff&fg=000&s=0)
. So both ![](https://s0.wp.com/latex.php?latex=x_1%5En&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=x_2%5En&bg=ffffff&fg=000&s=0)
 are solutions for our problem. In other words, both ![](https://s0.wp.com/latex.php?latex=f%28n%29%3Dx_1%5En&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=f%28n%29%3Dx_2%5En&bg=ffffff&fg=000&s=0)
 hold. But notice the following: we can modify our initial equation as follows:

![](https://s0.wp.com/latex.php?latex=x%5En%28x%5E2+%2B+x+%2B+1%29%3D0+%5CRightarrow+%5Calpha+x%5En%28x%5E2+%C2%A0%2B+x+%2B+1%29+%3D+%5Calpha+%5Ccdot+0+%3D+0&bg=ffffff&fg=000&s=0)


That mean that if ![](https://s0.wp.com/latex.php?latex=q%5En&bg=ffffff&fg=000&s=0)
 is a solution to the problem, then ![](https://s0.wp.com/latex.php?latex=%5Calpha+q%5En&bg=ffffff&fg=000&s=0)
 is also a solution to the problem. And also notice the following: suppose that ![](https://s0.wp.com/latex.php?latex=u%5En&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=v%5En&bg=ffffff&fg=000&s=0)
 are solutions to the problem. Then ![](https://s0.wp.com/latex.php?latex=u%5En+%2B+v%5En&bg=ffffff&fg=000&s=0)
 are also solutions to the problem. In general, if ![](https://s0.wp.com/latex.php?latex=u%5En&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=v%5En&bg=ffffff&fg=000&s=0)
 are solutions to the problem, then ![](https://s0.wp.com/latex.php?latex=c+u%5En+%2B+d+v%5En&bg=ffffff&fg=000&s=0)
 are solutions to the problem.

Now we have a little more information! We know that ![](https://s0.wp.com/latex.php?latex=x_1&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=x_2&bg=ffffff&fg=000&s=0)
 are solutions to the problem, so we know that ![](https://s0.wp.com/latex.php?latex=c+x_1%5En+%2B+d+x_2%5En&bg=ffffff&fg=000&s=0)
 is a solution to the problem for any real numbers ![](https://s0.wp.com/latex.php?latex=c&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=d&bg=ffffff&fg=000&s=0)
. Since ![](https://s0.wp.com/latex.php?latex=f%280%29%3D0&bg=ffffff&fg=000&s=0)
 we can derive the following:

![](https://s0.wp.com/latex.php?latex=f%280%29%3D0+%5CRightarrow+cx_1%5E0+%2B+dx_2%5E0+%3D+c+%2B+d+%3D+0+%5CRightarrow+d+%3D+-c&bg=ffffff&fg=000&s=0)


Next equation: ![](https://s0.wp.com/latex.php?latex=f%281%29%3D1&bg=ffffff&fg=000&s=0)
 gives the following insight:

![](https://s0.wp.com/latex.php?latex=f%281%29%3D1+%5CRightarrow+cx_1+%2B+dx_2+%3D+1+%5CRightarrow+c+x_1+-+cx_2+%3D+1+%5CRightarrow+c+%3D+%5Cfrac%7B1%7D%7Bx_1+-+x_2%7D&bg=ffffff&fg=000&s=0)


Et voila! ![](https://s0.wp.com/latex.php?latex=c+%3D+%5Cfrac%7B1%7D%7Bx_1+-+x_2%7D&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=d+%3D+-c+%3D+-%5Cfrac%7B1%7D%7Bx_1+-+x_2%7D&bg=ffffff&fg=000&s=0)


This also solves the overall formula:

![](https://s0.wp.com/latex.php?latex=f%28n%29+%3D+c+x_1%5En+%2B+d+x_2%5En+%3D+%5Cfrac%7Bx_1%5En+-+x_2%5En%7D%7Bx_1+-+x_2%7D+%3D+%5Cfrac%7B%28%5Cfrac%7B1%7D%7B2%7D+%2B+%5Cfrac%7B1%7D%7B2%7D+%5Csqrt%7B5%7D%29%5En+-+%28%5Cfrac%7B1%7D%7B2%7D+-+%5Cfrac%7B1%7D%7B2%7D+%5Csqrt%7B5%7D%29%5En%7D%7B%5Csqrt%7B5%7D%7D&bg=ffffff&fg=000&s=0)


What a monster! Let’s try out for ![](https://s0.wp.com/latex.php?latex=f%282%29&bg=ffffff&fg=000&s=0)
 for which we know that ![](https://s0.wp.com/latex.php?latex=f%282%29%3Df%281%29%2Bf%280%29%3D1%2B0%3D1&bg=ffffff&fg=000&s=0)
:

![](https://s0.wp.com/latex.php?latex=f%282%29+%3D%5Cfrac%7B%28%5Cfrac%7B1%7D%7B2%7D+%2B+%5Cfrac%7B1%7D%7B2%7D+%5Csqrt%7B5%7D%29%5E2+-+%28%5Cfrac%7B1%7D%7B2%7D+-+%5Cfrac%7B1%7D%7B2%7D+%5Csqrt%7B5%7D%29%5E2%7D%7B%5Csqrt%7B5%7D%7D+%3D+%5Cfrac%7B%5Cfrac%7B1%7D%7B4%7D+%2B+%5Cfrac%7B5%7D%7B4%7D+%2B+%5Cfrac%7B1%7D%7B2%7D%5Csqrt%7B5%7D+-+%5Cfrac%7B1%7D%7B4%7D+%2B+%5Cfrac%7B1%7D%7B2%7D%5Csqrt%7B5%7D+-+%5Cfrac%7B5%7D%7B4%7D%7D%7B%5Csqrt%7B5%7D%7D+%3D+%5Cfrac%7B%5Csqrt%7B5%7D%7D%7B%5Csqrt%7B5%7D%7D+%3D+1&bg=ffffff&fg=000&s=0)


What a beauty!

## Back to the summing

So, we were asked to sum all even numbers in the Fibonacci sequence up to some number. Okay, I have to admit that this is the only point where I use a computer. It is asked to consider only the terms in the Fibonacci sequence that do not exceed 4 million. A quick check on the computer gives me that ![](https://s0.wp.com/latex.php?latex=f%2833%29+%3D%C2%A03524578&bg=ffffff&fg=000&s=0)
 which is slightly less than 4 million and ![](https://s0.wp.com/latex.php?latex=f%2834%29%3D5702887&bg=ffffff&fg=000&s=0)
. So ![](https://s0.wp.com/latex.php?latex=n%3D33&bg=ffffff&fg=000&s=0)
 is the ![](https://s0.wp.com/latex.php?latex=n&bg=ffffff&fg=000&s=0)
 such that its element in the Fibonacci sequence is the largest which does not exceed 4 million. Since it is a multiple of ![](https://s0.wp.com/latex.php?latex=3&bg=ffffff&fg=000&s=0)
, it even simplifies our problem. We want to sum up all even numbers of the Fibonacci sequence and remember that these are the elements ![](https://s0.wp.com/latex.php?latex=f%283n%29&bg=ffffff&fg=000&s=0)
 for any integer ![](https://s0.wp.com/latex.php?latex=n&bg=ffffff&fg=000&s=0)
. So we seek ![](https://s0.wp.com/latex.php?latex=f%280%29+%2B+f%283%29+%2B+f%286%29+%2B+...+%2B+f%2833%29&bg=ffffff&fg=000&s=0)
. In other words, we seek ![](https://s0.wp.com/latex.php?latex=%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+f%283n%29&bg=ffffff&fg=000&s=0)
. By our beautiful equivalent of ![](https://s0.wp.com/latex.php?latex=f%28n%29&bg=ffffff&fg=000&s=0)
 found earlier, we know that this equals:

![](https://s0.wp.com/latex.php?latex=%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+f%283n%29+%3D%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+f%283n%29+%3D%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+%5Cfrac%7Bx_1%5E%7B3n%7D+-+x_2%5E%7B3n%7D%7D%7Bx_1+-+x_2%7D&bg=ffffff&fg=000&s=0)


Don’t be scared! We can simplify this down further:

![](https://s0.wp.com/latex.php?latex=%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+f%283n%29+%3D%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+%5Cfrac%7Bx_1%5E%7B3n%7D+-+x_2%5E%7B3n%7D%7D%7Bx_1+-+x_2%7D%3D%5Cfrac%7B1%7D%7Bx_1+-+x_2%7D+%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+x_1%5E%7B3n%7D+-+x_2%5E%7B3n%7D&bg=ffffff&fg=000&s=0)


We can also split the sum:

![](https://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7Bx_1+-+x_2%7D+%28+%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+x_1%5E%7B3n%7D+-+x_2%5E%7B3n%7D%29+%3D%5Cfrac%7B1%7D%7Bx_1+-+x_2%7D%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+x_1%5E%7B3n%7D+-%5Cfrac%7B1%7D%7Bx_1+-+x_2%7D+%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+x_2%5E%7B3n%7D&bg=ffffff&fg=000&s=0)


And now we only need to know how we can calculate these sums easily.

## Solve ![](https://s0.wp.com/latex.php?latex=%5Csum%5Climits_%7Bn%3D0%7D%5Em+a%5E%7Bkn%7D&bg=ffffff&fg=000&s=0)


So, we first start with a definition. Let ![](https://s0.wp.com/latex.php?latex=a&bg=ffffff&fg=000&s=0)
 be a real number (warning: I actually have very strict about ![](https://s0.wp.com/latex.php?latex=a&bg=ffffff&fg=000&s=0)
, but I will do it less strict here). Let ![](https://s0.wp.com/latex.php?latex=k&bg=ffffff&fg=000&s=0)
 be a real number and let ![](https://s0.wp.com/latex.php?latex=m&bg=ffffff&fg=000&s=0)
 be an integer larger or equal than 0. Define:

![](https://s0.wp.com/latex.php?latex=s+%3D+%5Csum%5Climits_%7Bn%3D0%7D%5Em+a%5E%7Bkn%7D&bg=ffffff&fg=000&s=0)


Then:

![](https://s0.wp.com/latex.php?latex=a%5Ek+%5Ccdot+s+%3D+a%5Ek+%5Ccdot+%5Csum%5Climits_%7Bn%3D0%7D%5Em+a%5E%7Bkn%7D+%3D+%5Csum%5Climits_%7Bn%3D0%7D%5Em+a%5E%7Bk%7Bn%2B1%7D%7D+%3D+%5Csum%5Climits_%7Bn%3D1%7D%5E%7Bm%2B1%7D+a%5E%7Bkn%7D&bg=ffffff&fg=000&s=0)


And now subtract the two to cancel out a lot of common terms:

![](https://s0.wp.com/latex.php?latex=a%5Ek+%5Ccdot+s+-+s+%3D+s%28a%5Ek+-+1%29+%3D+a%5E%7Bk%7Bm+%2B+1%7D%7D+-+1+%5CRightarrow+s+%3D+%5Cfrac%7Ba%5E%7Bk%7Bm%2B1%7D%7D-1%7D%7Ba%5Ek+-+1%7D&bg=ffffff&fg=000&s=0)


Cool! Problem solved.

## Putting all the parts together

We need to compute ![](https://s0.wp.com/latex.php?latex=%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+x_1%5E%7B3n%7D+-%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+x_2%5E%7B3n%7D&bg=ffffff&fg=000&s=0)
 and we know have the tool to do so!

![](https://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7Bx_1+-+x_2%7D+%28%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+x_1%5E%7B3n%7D+-%5Csum%5Climits_%7Bn%3D0%7D%5E%7B11%7D+x_2%5E%7B3n%7D%29+%3D%5Cfrac%7B1%7D%7Bx_1+-+x_2%7D%C2%A0%28%5Cfrac%7Bx_1%5E%7B36%7D+-+1%7D%7Bx_1%5E3+-+1%7D+-%5Cfrac%7Bx_2%5E%7B36%7D+-+1%7D%7Bx_2%5E3+-+1%7D%29&bg=ffffff&fg=000&s=0)


Now we can fill in the found numbers for ![](https://s0.wp.com/latex.php?latex=x_1&bg=ffffff&fg=000&s=0)
 and ![](https://s0.wp.com/latex.php?latex=x_2&bg=ffffff&fg=000&s=0)
:

![](https://s0.wp.com/latex.php?latex=%5Cfrac%7B1%7D%7Bx_1+-+x_2%7D%C2%A0%28%5Cfrac%7Bx_1%5E%7B36%7D+-+1%7D%7Bx_1%5E3+-+1%7D+-%5Cfrac%7Bx_2%5E%7B36%7D+-+1%7D%7Bx_2%5E3+-+1%7D%29+%3D+%5Cfrac%7B1%7D%7B%5Csqrt%7B5%7D%7D%C2%A0%28%5Cfrac%7B%28%5Cfrac%7B1%7D%7B2%7D+%2B+%5Cfrac%7B1%7D%7B2%7D+%5Csqrt%7B5%7D%29%5E%7B36%7D+-+1%7D%7B%28%5Cfrac%7B1%7D%7B2%7D+%2B+%5Cfrac%7B1%7D%7B2%7D+%5Csqrt%7B5%7D%29%5E3+-+1%7D+-%5Cfrac%7B%28%5Cfrac%7B1%7D%7B2%7D+-+%5Cfrac%7B1%7D%7B2%7D+%5Csqrt%7B5%7D%29%5E%7B36%7D+-+1%7D%7B%28%5Cfrac%7B1%7D%7B2%7D+-+%5Cfrac%7B1%7D%7B2%7D+%5Csqrt%7B5%7D%29%5E3+-+1%7D%29+&bg=ffffff&fg=000&s=0)


And with a calculator (actually by using Scala) we now can find the answer to the original question:

![](https://s0.wp.com/latex.php?latex=4613732&bg=ffffff&fg=000&s=0)


## Conclusion (TL;DR)

![](https://s0.wp.com/latex.php?latex=4613732&bg=ffffff&fg=000&s=0)
, and do not use math here. It gives beautiful results and generalize results, but a simple functional programming approach (by brute forcing all numbers) would have been way faster to solve this problem:

```
/**
 * Calculate the nth Fibonacci number.
 *
 * @param n index in the sequence
 * @return nth Fibonacci number
 */
def fibonacci(n: Int): Int = {
 if (n == 0) return 0
 if (n == 1) return 1
 fibonacci(n - 1) + fibonacci(n - 2)
}

/**
 * Calculate the sum of even Fibonacci numbers which do not exceed m.
 *
 * @param m upper bound
 * @param k current index to try out
 * @return sum of even Fibonacci numbers up to m
 */
def sum(m: Int, k: Int): Int = {
 // Calculate the kth Fibonacci number
 val f = fibonacci(k)
 // If f does not exceed m and f is even, then give back f plus the sum of the remaining sequence
 if (f < m && f % 2 == 0) return f + sum(m, k + 1)
 // If f exceeds m, then there is no interesting result to be found
 if (f >= m) return 0
 // Otherwise, f is not even, so only sum over the remainder of the sequence
 sum(m, k + 1)
}

println(sum(4000000, 0))
```

 
